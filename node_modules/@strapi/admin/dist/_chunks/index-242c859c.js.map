{"version":3,"file":"index-242c859c.js","sources":["../../ee/admin/src/pages/SettingsPage/pages/ReviewWorkflows/pages/CreateView/CreateView.js","../../ee/admin/src/pages/SettingsPage/pages/ReviewWorkflows/pages/CreateView/index.js"],"sourcesContent":["import * as React from 'react';\n\nimport { Button, Flex, Loader, Typography } from '@strapi/design-system';\nimport {\n  ConfirmDialog,\n  useAPIErrorHandler,\n  useFetchClient,\n  useNotification,\n} from '@strapi/helper-plugin';\nimport { Check } from '@strapi/icons';\nimport { useFormik, Form, FormikProvider } from 'formik';\nimport set from 'lodash/set';\nimport { useIntl } from 'react-intl';\nimport { useMutation } from 'react-query';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\n\nimport { useAdminRoles } from '../../../../../../../../../admin/src/hooks/useAdminRoles';\nimport { useContentTypes } from '../../../../../../../../../admin/src/hooks/useContentTypes';\nimport { useInjectReducer } from '../../../../../../../../../admin/src/hooks/useInjectReducer';\nimport { useLicenseLimits } from '../../../../../../hooks/useLicenseLimits';\nimport {\n  addStage,\n  resetWorkflow,\n  setContentTypes,\n  setIsLoading,\n  setRoles,\n  setWorkflows,\n} from '../../actions';\nimport * as Layout from '../../components/Layout';\nimport * as LimitsModal from '../../components/LimitsModal';\nimport { Stages } from '../../components/Stages';\nimport { WorkflowAttributes } from '../../components/WorkflowAttributes';\nimport {\n  CHARGEBEE_STAGES_PER_WORKFLOW_ENTITLEMENT_NAME,\n  CHARGEBEE_WORKFLOW_ENTITLEMENT_NAME,\n  REDUX_NAMESPACE,\n} from '../../constants';\nimport { useReviewWorkflows } from '../../hooks/useReviewWorkflows';\nimport { reducer } from '../../reducer';\nimport {\n  selectIsLoading,\n  selectIsWorkflowDirty,\n  selectCurrentWorkflow,\n  selectRoles,\n} from '../../selectors';\nimport { validateWorkflow } from '../../utils/validateWorkflow';\n\nexport function ReviewWorkflowsCreateView() {\n  const { formatMessage } = useIntl();\n  const { post } = useFetchClient();\n  const { push } = useHistory();\n  const { formatAPIError } = useAPIErrorHandler();\n  const dispatch = useDispatch();\n  const toggleNotification = useNotification();\n  const { collectionTypes, singleTypes, isLoading: isLoadingContentTypes } = useContentTypes();\n  const { isLoading: isLoadingWorkflow, meta, workflows } = useReviewWorkflows();\n  const { isLoading: isLoadingRoles, roles: serverRoles } = useAdminRoles(undefined, {\n    retry: false,\n  });\n  const isLoading = useSelector(selectIsLoading);\n  const currentWorkflowIsDirty = useSelector(selectIsWorkflowDirty);\n  const currentWorkflow = useSelector(selectCurrentWorkflow);\n  const roles = useSelector(selectRoles);\n  const [showLimitModal, setShowLimitModal] = React.useState(false);\n  const { isLoading: isLicenseLoading, getFeature } = useLicenseLimits();\n  const [initialErrors, setInitialErrors] = React.useState(null);\n  const [savePrompts, setSavePrompts] = React.useState({});\n\n  const limits = getFeature('review-workflows');\n  const contentTypesFromOtherWorkflows = workflows.flatMap((workflow) => workflow.contentTypes);\n\n  const { mutateAsync, isLoading: isLoadingMutation } = useMutation(\n    async ({ workflow }) => {\n      const {\n        data: { data },\n      } = await post(`/admin/review-workflows/workflows`, {\n        data: workflow,\n      });\n\n      return data;\n    },\n    {\n      onSuccess() {\n        toggleNotification({\n          type: 'success',\n          message: {\n            id: 'Settings.review-workflows.create.page.notification.success',\n            defaultMessage: 'Workflow successfully created',\n          },\n        });\n      },\n    }\n  );\n\n  const submitForm = async () => {\n    setSavePrompts({});\n\n    try {\n      const workflow = await mutateAsync({ workflow: currentWorkflow });\n\n      push(`/settings/review-workflows/${workflow.id}`);\n\n      return workflow;\n    } catch (error) {\n      // TODO: this would benefit from a utility to get a formik error\n      // representation from an API error\n      if (\n        error.response.data?.error?.name === 'ValidationError' &&\n        error.response.data?.error?.details?.errors?.length > 0\n      ) {\n        setInitialErrors(\n          error.response.data?.error?.details?.errors.reduce((acc, error) => {\n            set(acc, error.path, error.message);\n\n            return acc;\n          }, {})\n        );\n      }\n\n      toggleNotification({\n        type: 'warning',\n        message: formatAPIError(error),\n      });\n\n      return null;\n    }\n  };\n\n  const handleConfirmDeleteDialog = async () => {\n    await submitForm();\n  };\n\n  const handleConfirmClose = () => {\n    setSavePrompts({});\n  };\n\n  const formik = useFormik({\n    enableReinitialize: true,\n    initialErrors,\n    initialValues: currentWorkflow,\n    async onSubmit() {\n      const isContentTypeReassignment = currentWorkflow.contentTypes.some((contentType) =>\n        contentTypesFromOtherWorkflows.includes(contentType)\n      );\n\n      /**\n       * If the current license has a limit, check if the total count of workflows\n       * exceeds that limit and display the limits modal instead of sending the\n       * update, because it would throw an API error.\n       */\n\n      if (\n        limits?.[CHARGEBEE_WORKFLOW_ENTITLEMENT_NAME] &&\n        meta?.workflowCount >= parseInt(limits[CHARGEBEE_WORKFLOW_ENTITLEMENT_NAME], 10)\n      ) {\n        setShowLimitModal('workflow');\n\n        /**\n         * If the current license has a limit, check if the total count of stages\n         * exceeds that limit and display the limits modal instead of sending the\n         * update, because it would throw an API error.\n         */\n      } else if (\n        limits?.[CHARGEBEE_STAGES_PER_WORKFLOW_ENTITLEMENT_NAME] &&\n        currentWorkflow.stages.length >=\n          parseInt(limits[CHARGEBEE_STAGES_PER_WORKFLOW_ENTITLEMENT_NAME], 10)\n      ) {\n        setShowLimitModal('stage');\n      } else if (isContentTypeReassignment) {\n        setSavePrompts((prev) => ({ ...prev, hasReassignedContentTypes: true }));\n      } else {\n        submitForm();\n      }\n    },\n    validate(values) {\n      return validateWorkflow({ values, formatMessage });\n    },\n  });\n\n  useInjectReducer(REDUX_NAMESPACE, reducer);\n\n  React.useEffect(() => {\n    dispatch(resetWorkflow());\n\n    if (!isLoadingWorkflow) {\n      dispatch(setWorkflows({ workflows }));\n    }\n\n    if (!isLoadingContentTypes) {\n      dispatch(setContentTypes({ collectionTypes, singleTypes }));\n    }\n\n    if (!isLoadingRoles) {\n      dispatch(setRoles(serverRoles));\n    }\n\n    dispatch(setIsLoading(isLoadingContentTypes || isLoadingRoles));\n\n    // Create an empty default stage\n    dispatch(\n      addStage({\n        name: '',\n      })\n    );\n  }, [\n    collectionTypes,\n    dispatch,\n    isLoadingContentTypes,\n    isLoadingRoles,\n    isLoadingWorkflow,\n    serverRoles,\n    singleTypes,\n    workflows,\n  ]);\n\n  /**\n   * If the current license has a limit:\n   * check if the total count of workflows or stages exceeds that limit and display\n   * the limits modal on page load. It can be closed by the user, but the\n   * API will throw an error in case they try to create a new workflow or update the\n   * stages.\n   *\n   * If the current license does not have a limit (e.g. offline license):\n   * do nothing (for now). In case they are trying to create the 201st workflow/ stage\n   * the API will throw an error.\n   *\n   */\n\n  React.useEffect(() => {\n    if (!isLoadingWorkflow && !isLicenseLoading) {\n      if (\n        limits?.[CHARGEBEE_WORKFLOW_ENTITLEMENT_NAME] &&\n        meta?.workflowsTotal >= parseInt(limits[CHARGEBEE_WORKFLOW_ENTITLEMENT_NAME], 10)\n      ) {\n        setShowLimitModal('workflow');\n      } else if (\n        limits?.[CHARGEBEE_STAGES_PER_WORKFLOW_ENTITLEMENT_NAME] &&\n        currentWorkflow.stages.length >=\n          parseInt(limits[CHARGEBEE_STAGES_PER_WORKFLOW_ENTITLEMENT_NAME], 10)\n      ) {\n        setShowLimitModal('stage');\n      }\n    }\n  }, [\n    isLicenseLoading,\n    isLoadingWorkflow,\n    limits,\n    meta?.workflowsTotal,\n    currentWorkflow.stages.length,\n  ]);\n\n  React.useEffect(() => {\n    if (!isLoading && roles.length === 0) {\n      toggleNotification({\n        blockTransition: true,\n        type: 'warning',\n        message: formatMessage({\n          id: 'Settings.review-workflows.stage.permissions.noPermissions.description',\n          defaultMessage: 'You donâ€™t have the permission to see roles',\n        }),\n      });\n    }\n  }, [formatMessage, isLoading, roles, toggleNotification]);\n\n  return (\n    <>\n      <Layout.DragLayerRendered />\n\n      <FormikProvider value={formik}>\n        <Form onSubmit={formik.handleSubmit}>\n          <Layout.Header\n            navigationAction={<Layout.Back href=\"/settings/review-workflows\" />}\n            primaryAction={\n              <Button\n                startIcon={<Check />}\n                type=\"submit\"\n                size=\"M\"\n                disabled={!currentWorkflowIsDirty}\n                isLoading={isLoadingMutation}\n              >\n                {formatMessage({\n                  id: 'global.save',\n                  defaultMessage: 'Save',\n                })}\n              </Button>\n            }\n            title={formatMessage({\n              id: 'Settings.review-workflows.create.page.title',\n              defaultMessage: 'Create Review Workflow',\n            })}\n            subtitle={formatMessage(\n              {\n                id: 'Settings.review-workflows.page.subtitle',\n                defaultMessage: '{count, plural, one {# stage} other {# stages}}',\n              },\n              { count: currentWorkflow?.stages?.length ?? 0 }\n            )}\n          />\n          <Layout.Root>\n            <Flex alignItems=\"stretch\" direction=\"column\" gap={7}>\n              {isLoading ? (\n                <Loader>\n                  {formatMessage({\n                    id: 'Settings.review-workflows.page.isLoading',\n                    defaultMessage: 'Workflow is loading',\n                  })}\n                </Loader>\n              ) : (\n                <Flex alignItems=\"stretch\" direction=\"column\" gap={7}>\n                  <WorkflowAttributes />\n                  <Stages stages={formik.values?.stages} />\n                </Flex>\n              )}\n            </Flex>\n          </Layout.Root>\n        </Form>\n      </FormikProvider>\n\n      <ConfirmDialog.Root\n        isConfirmButtonLoading={isLoading}\n        isOpen={Object.keys(savePrompts).length > 0}\n        onToggleDialog={handleConfirmClose}\n        onConfirm={handleConfirmDeleteDialog}\n      >\n        <ConfirmDialog.Body>\n          <Flex direction=\"column\" gap={5}>\n            {savePrompts.hasReassignedContentTypes && (\n              <Typography textAlign=\"center\" variant=\"omega\">\n                {formatMessage(\n                  {\n                    id: 'Settings.review-workflows.page.delete.confirm.contentType.body',\n                    defaultMessage:\n                      '{count} {count, plural, one {content-type} other {content-types}} {count, plural, one {is} other {are}} already mapped to {count, plural, one {another workflow} other {other workflows}}. If you save changes, {count, plural, one {this} other {these}} {count, plural, one {content-type} other {{count} content-types}} will no more be mapped to the {count, plural, one {another workflow} other {other workflows}} and all corresponding information will be removed.',\n                  },\n                  {\n                    count: contentTypesFromOtherWorkflows.filter((contentType) =>\n                      currentWorkflow.contentTypes.includes(contentType)\n                    ).length,\n                  }\n                )}\n              </Typography>\n            )}\n\n            <Typography textAlign=\"center\" variant=\"omega\">\n              {formatMessage({\n                id: 'Settings.review-workflows.page.delete.confirm.confirm',\n                defaultMessage: 'Are you sure you want to save?',\n              })}\n            </Typography>\n          </Flex>\n        </ConfirmDialog.Body>\n      </ConfirmDialog.Root>\n\n      <LimitsModal.Root\n        isOpen={showLimitModal === 'workflow'}\n        onClose={() => setShowLimitModal(false)}\n      >\n        <LimitsModal.Title>\n          {formatMessage({\n            id: 'Settings.review-workflows.create.page.workflows.limit.title',\n            defaultMessage: 'Youâ€™ve reached the limit of workflows in your plan',\n          })}\n        </LimitsModal.Title>\n\n        <LimitsModal.Body>\n          {formatMessage({\n            id: 'Settings.review-workflows.create.page.workflows.limit.body',\n            defaultMessage: 'Delete a workflow or contact Sales to enable more workflows.',\n          })}\n        </LimitsModal.Body>\n      </LimitsModal.Root>\n\n      <LimitsModal.Root\n        isOpen={showLimitModal === 'stage'}\n        onClose={() => setShowLimitModal(false)}\n      >\n        <LimitsModal.Title>\n          {formatMessage({\n            id: 'Settings.review-workflows.create.page.stages.limit.title',\n            defaultMessage: 'You have reached the limit of stages for this workflow in your plan',\n          })}\n        </LimitsModal.Title>\n\n        <LimitsModal.Body>\n          {formatMessage({\n            id: 'Settings.review-workflows.create.page.stages.limit.body',\n            defaultMessage: 'Try deleting some stages or contact Sales to enable more stages.',\n          })}\n        </LimitsModal.Body>\n      </LimitsModal.Root>\n    </>\n  );\n}\n","import React from 'react';\n\nimport { CheckPagePermissions } from '@strapi/helper-plugin';\nimport { useSelector } from 'react-redux';\n\nimport { selectAdminPermissions } from '../../../../../../../../../admin/src/selectors';\n\nimport { ReviewWorkflowsCreateView } from './CreateView';\n\nexport default function () {\n  const permissions = useSelector(selectAdminPermissions);\n\n  return (\n    <CheckPagePermissions permissions={permissions.settings['review-workflows'].create}>\n      <ReviewWorkflowsCreateView />\n    </CheckPagePermissions>\n  );\n}\n"],"names":["useIntl","useFetchClient","useHistory","useAPIErrorHandler","useDispatch","useNotification","useContentTypes","useReviewWorkflows","useAdminRoles","useSelector","selectIsLoading","selectIsWorkflowDirty","selectCurrentWorkflow","selectRoles","React","useLicenseLimits","useMutation","error","set","formik","useFormik","CHARGEBEE_WORKFLOW_ENTITLEMENT_NAME","CHARGEBEE_STAGES_PER_WORKFLOW_ENTITLEMENT_NAME","validateWorkflow","useInjectReducer","REDUX_NAMESPACE","reducer","resetWorkflow","setWorkflows","setContentTypes","setRoles","setIsLoading","addStage","jsxs","Fragment","jsx","Layout.DragLayerRendered","FormikProvider","Form","Layout.Header","Layout.Back","Button","Check","Layout.Root","Flex","Loader","WorkflowAttributes","Stages","ConfirmDialog","Typography","LimitsModal.Root","LimitsModal.Title","LimitsModal.Body","selectAdminPermissions","CheckPagePermissions"],"mappings":"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"}