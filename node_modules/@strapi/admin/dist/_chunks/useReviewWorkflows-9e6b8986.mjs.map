{"version":3,"file":"useReviewWorkflows-9e6b8986.mjs","sources":["../../ee/admin/src/pages/SettingsPage/pages/ReviewWorkflows/hooks/useReviewWorkflows.js"],"sourcesContent":["import * as React from 'react';\n\nimport { useFetchClient } from '@strapi/helper-plugin';\nimport { useQuery } from 'react-query';\n\nexport function useReviewWorkflows(params = {}) {\n  const { get } = useFetchClient();\n\n  const { id = '', ...queryParams } = params;\n  const defaultQueryParams = {\n    populate: 'stages',\n  };\n\n  const { data, isLoading, status, refetch } = useQuery(\n    ['review-workflows', 'workflows', id],\n    async () => {\n      const res = await get(`/admin/review-workflows/workflows/${id}`, {\n        params: { ...defaultQueryParams, ...queryParams },\n      });\n\n      return res.data;\n    }\n  );\n\n  // the return value needs to be memoized, because intantiating\n  // an empty array as default value would lead to an unstable return\n  // value, which later on triggers infinite loops if used in the\n  // dependency arrays of other hooks\n\n  const workflows = React.useMemo(() => {\n    if (id && data?.data) {\n      return [data.data];\n    }\n    if (Array.isArray(data?.data)) {\n      return data.data;\n    }\n\n    return [];\n  }, [data?.data, id]);\n\n  return {\n    // meta contains e.g. the total of all workflows. we can not use\n    // the pagination object here, because the list is not paginated.\n    meta: React.useMemo(() => data?.meta ?? {}, [data?.meta]),\n    workflows,\n    isLoading,\n    status,\n    refetch,\n  };\n}\n"],"names":[],"mappings":";;;AAKgB,SAAA,mBAAmB,SAAS,IAAI;AACxC,QAAA,EAAE,QAAQ;AAEhB,QAAM,EAAE,KAAK,IAAI,GAAG,gBAAgB;AACpC,QAAM,qBAAqB;AAAA,IACzB,UAAU;AAAA,EAAA;AAGZ,QAAM,EAAE,MAAM,WAAW,QAAQ,QAAY,IAAA;AAAA,IAC3C,CAAC,oBAAoB,aAAa,EAAE;AAAA,IACpC,YAAY;AACV,YAAM,MAAM,MAAM,IAAI,qCAAqC,EAAE,IAAI;AAAA,QAC/D,QAAQ,EAAE,GAAG,oBAAoB,GAAG,YAAY;AAAA,MAAA,CACjD;AAED,aAAO,IAAI;AAAA,IACb;AAAA,EAAA;AAQI,QAAA,YAAY,MAAM,QAAQ,MAAM;AAChC,QAAA,MAAM,MAAM,MAAM;AACb,aAAA,CAAC,KAAK,IAAI;AAAA,IACnB;AACA,QAAI,MAAM,QAAQ,MAAM,IAAI,GAAG;AAC7B,aAAO,KAAK;AAAA,IACd;AAEA,WAAO;EACN,GAAA,CAAC,MAAM,MAAM,EAAE,CAAC;AAEZ,SAAA;AAAA;AAAA;AAAA,IAGL,MAAM,MAAM,QAAQ,MAAM,MAAM,QAAQ,IAAI,CAAC,MAAM,IAAI,CAAC;AAAA,IACxD;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EAAA;AAEJ;"}